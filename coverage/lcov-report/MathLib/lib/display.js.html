<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for MathLib/lib/display.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../index.html">All files</a> / <a href="index.html">MathLib/lib</a> display.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">90.74% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>49/54</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">84% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>42/50</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">90% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>9/10</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">90.74% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>49/54</span>
      </div>
    </div>
  </div>
  <div class='status-line high'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">14x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">14x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">39x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-yes">11x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">14x</span>
<span class="cline-any cline-yes">14x</span>
<span class="cline-any cline-yes">14x</span>
<span class="cline-any cline-yes">14x</span>
<span class="cline-any cline-yes">14x</span>
<span class="cline-any cline-yes">14x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">14x</span>
<span class="cline-any cline-yes">13x</span>
<span class="cline-any cline-yes">10x</span>
<span class="cline-any cline-yes">13x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">10x</span>
<span class="cline-any cline-yes">10x</span>
<span class="cline-any cline-yes">10x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">10x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">10x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">10x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">20x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">20x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">20x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span></td><td class="text"><pre class="prettyprint lang-js">"use strict";
&nbsp;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
&nbsp;
var _lib = require("./lib");
&nbsp;
var _calculate = _interopRequireDefault(require("./calculate"));
&nbsp;
function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : <span class="branch-1 cbranch-no" title="branch not covered" >{ default: obj };</span> }
&nbsp;
var abs = _calculate.default.abs; // const display = (num, fix = 2, transLargeNumber = true) =&gt; {
//   let [fix1, fix2, fix3] = Array.isArray(fix)
//     ? fix
//     : Array.from({ length: 3 }, (_, index) =&gt; fix);
//   let transformedNum = toNumber(num);
//   if (isNumber(transformedNum)) {
//     if (transLargeNumber) {
//       if (transformedNum &gt; 100000000) {
//         return (transformedNum / 100000000).toFixed(fix1) + "亿";
//       } else if (transformedNum &gt;= 1000000) {
//         let temp = (transformedNum / 10000).toFixed(fix2);
//         return overLimit(temp, 10000) ? `${(1).toFixed(fix2)}亿` : `${temp}万`;
//       } else {
//         let temp = transformedNum.toFixed(fix3);
//         return overLimit(temp, 1000000) ? `${(100).toFixed(fix2)}万` : temp;
//       }
//     } else {
//       return transformedNum.toFixed(fix3);
//     }
//   } else {
//     return "--";
//   }
// };
&nbsp;
var NUM_LEVELS = {
  "亿": [100000000],
  "万": [10000, 1000000, 10000000],
  "千": [1000]
};
var LEVEL_LABEL = {
  "亿": 100000000,
  "万": 10000,
  "千": 1000
};
&nbsp;
var getFix = function getFix(fix, length) {
  <span class="missing-if-branch" title="if path not taken" >I</span>if (Array.isArray(fix)) {
<span class="cstat-no" title="statement not covered" >    return fix.length === length ? fix : Array.from({</span>
      length: length
    }, <span class="fstat-no" title="function not covered" >fu</span>nction (_, index) {
<span class="cstat-no" title="statement not covered" >      return fix[0] || 2;</span>
    });
  } else {
    return Array.from({
      length: length
    }, function (_, index) {
      return fix;
    });
  }
};
&nbsp;
var getLabel = function getLabel(num) {
  return Object.keys(NUM_LEVELS).find(function (key) {
    return NUM_LEVELS[key].includes((0, _lib.toNumber)(num));
  });
};
/*
  @ {num} 待显示的数字，Infinite、-Infinite、NaN以及其他的不可转为数字的均显示为'--'
  @ {fix} 保留几位小数，采用银行家算法：四舍六入五考虑，五后非零就进一，五后为零看奇偶，五前为偶应舍去，五前为奇要进一
  @ {transLargeNumber} 是否要转换显示大数字，超过100万显示为xxx万，超过1亿显示为xxx亿
  @ {levels} 分隔数字，默认是1亿和100万
*/
&nbsp;
&nbsp;
var display = function display(num) {
  var toFix = arguments.length &gt; 1 &amp;&amp; arguments[1] !== undefined ? arguments[1] : 2;
  var transLargeNumber = arguments.length &gt; 2 &amp;&amp; arguments[2] !== undefined ? arguments[2] : true;
  var levels = arguments.length &gt; 3 &amp;&amp; arguments[3] !== undefined ? arguments[3] : [100000000, 1000000];
  levels = Array.isArray(levels) ? levels : [levels];
  var fix = getFix(toFix, levels.length + 1);
  var transformedNum = (0, _lib.toNumber)(num);
&nbsp;
  if ((0, _lib.isNumber)(transformedNum)) {
    if (transLargeNumber) {
      var index = levels.findIndex(function (i) {
        return transformedNum &gt;= i;
      });
      var realIndex = index &gt; -1 ? index : levels.length;
      var label = index &gt; -1 ? getLabel(levels[index]) : '';
      var divide = index &gt; -1 ? LEVEL_LABEL[label] : 1;
&nbsp;
      var _num = (transformedNum / divide).toFixed(fix[realIndex]);
&nbsp;
      <span class="missing-if-branch" title="if path not taken" >I</span>if (realIndex &gt;= 1 &amp;&amp; (0, _lib.overLimit)(_num * divide, levels[realIndex - 1])) {
        var largeLabel = <span class="cstat-no" title="statement not covered" >getLabel(levels[realIndex - 1]);</span>
        var largeDivide = <span class="cstat-no" title="statement not covered" >LEVEL_LABEL[largeLabel];</span>
<span class="cstat-no" title="statement not covered" >        return "".concat((levels[realIndex - 1] / largeDivide).toFixed(fix[realIndex - 1])).concat(largeLabel);</span>
      } else {
        return "".concat(_num).concat(label);
      }
    } else {
      return transformedNum.toFixed(fix[fix.length - 1]);
    }
  } else {
    return "--";
  }
};
&nbsp;
var localeDisplay = function localeDisplay(num) {
  var fix = arguments.length &gt; 1 &amp;&amp; arguments[1] !== undefined ? arguments[1] : 2;
  var transformedNum = (0, _lib.toNumber)(num);
&nbsp;
  if ((0, _lib.isNumber)(transformedNum)) {
    var fixNum = abs(num).toFixed(fix);
    var tempArr = fixNum.split(".");
    tempArr[0] = tempArr[0].split("").reverse().reduce(function (prev, cur, curIndex, array) {
      prev += cur;
&nbsp;
      if ((curIndex + 1) % 3 === 0 &amp;&amp; curIndex !== array.length - 1) {
        prev += ",";
      }
&nbsp;
      return prev;
    }, "").split("").reverse().join("");
    return "".concat(num &lt; 0 ? <span class="branch-0 cbranch-no" title="branch not covered" >"-" </span>: "").concat(tempArr.join("."));
  } else {
    return "--";
  }
};
&nbsp;
var _default = {
  display: display,
  localeDisplay: localeDisplay
};
exports.default = _default;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="https://istanbul.js.org/" target="_blank">istanbul</a> at Wed Nov 07 2018 13:45:13 GMT+0800 (CST)
</div>
</div>
<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../sorter.js"></script>
</body>
</html>
